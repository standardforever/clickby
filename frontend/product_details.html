<!DOCTYPE html>
<html>

<head>
    <link rel="stylesheet" id="main-css-url" />
    <link rel="stylesheet" id="test-css-url" />
    <link rel="stylesheet" id="product-details-css"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" />


    <!--  Bootstrap CSS -->
    <!-- Latest compiled and minified CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">

    <!-- jquery -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script type="module" src="/static/js/product_details/index.js"></script>
</head>

<body>

    <h1 class="p-3 text-white">Product Details</h1>

    <div id="product-details" class="product-details-container">
        <div class="row w-100">
            <div class="col-md-12">
                <p><strong>Category:</strong> <span id="productCategory"></span></p>
                <p><strong>ASIN:</strong> <span id="productASIN"></span></p>
                <p><strong>AMZ Title:</strong> <span id="amzTitle"></span></p>

                <h3>More Sellers</h3>
                <table class="table table-striped">
                    <thead>
                        <tr>
                            <th>Supplier Name</th>
                            <th>Product Link</th>
                            <th>Buy Price</th>
                            <th>UK Profit</th>
                            <th>UK AMZ ROI%</th>
                            <th>AMZ FEES</th>
                            <th>AMZ supplier link</th>
                        </tr>
                    </thead>
                    <tbody id="sellersTableBody">
                        <!-- Sellers will be added here by JavaScript -->
                    </tbody>
                </table>
            </div>

        </div>
    </div>

    <div class="chart-container">
        <canvas id="priceComparisonChart"></canvas>
    </div>

    <script>
        $(document).ready(function () {
            // Get the current URL path
            let scriptEle = document.createElement("script");

            const path = window.location.pathname;
            console.log(path)
            // Determine environment based on URL path
            let environment;
            if (path.startsWith('/test')) {
                environment = 'test';
            } else {
                environment = 'production';
            }
    
            // Set base URL and script/module URLs based on environment
            // const baseElement = document.getElementById('base-url');
             
            const mainLink = document.getElementById('main-css-url');
            const testLink = document.getElementById('test-css-url');
            const productLink = document.getElementById('product-details-css');
            const scriptModule = document.querySelector('script[type="module"]');
    
            scriptEle.setAttribute("type", "module");

            if (environment === 'production') {
                // baseElement.href = "/";
                mainLink.href = "/static/css/main.css";
                testLink.href = "/static/css/test.css";
                productLink.href = "/static/css/product_details/main.css";
                scriptEle.setAttribute("src", "/static/js/product_details/index.js");
                document.body.appendChild(scriptEle);
                // scriptModule.src = "/static/js/login/index.js";
            } else if (environment === 'test') {
                // baseElement.href = "/test/";
                mainLink.href = "/test/static/css/main.css";
                testLink.href = "/test/static/css/test.css";
                productLink.href = "/test/static/css/product_details/main.css";
                scriptEle.setAttribute("src", "/test/static/js/product_details/index.js");
                document.body.appendChild(scriptEle);
                // scriptModule.src = "/test/static/js/login/index.js";
            }
        })
    </script>

</body>

</html>